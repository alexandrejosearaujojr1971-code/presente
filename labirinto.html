<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Labirinto ❤️</title>
<style>
body{ margin:0; padding:0; background:#111; display:flex; justify-content:center; align-items:center; height:100vh; }
#maze{ position:relative; width:300px; height:300px; background:#222; border:2px solid #ff0; }
.ball{ position:absolute; width:20px; height:20px; background:#f00; border-radius:50%; top:10px; left:10px; }
.goal{ position:absolute; width:40px; height:40px; background:#ff0; bottom:10px; right:10px; }
#nextBtn{ display:none; position:fixed; bottom:20px; right:20px; background:#000; color:#00f; padding:10px 20px; border:2px solid #00f; cursor:pointer; }
</style>
</head>
<body>
<div id="maze">
    <div class="ball" id="ball"></div>
    <div class="goal"></div>
</div>
<button id="nextBtn" onclick="window.location.href='quiz.html'">PRÓXIMO</button>

<script>
const ball = document.getElementById("ball");
const maze = document.getElementById("maze");
const nextBtn = document.getElementById("nextBtn");
const step = 10;

let pos = {x:10, y:10};

function moveBall(dx, dy){
    let newX = pos.x + dx;
    let newY = pos.y + dy;
    // Mantém dentro do maze
    if(newX>=0 && newX<=maze.clientWidth-20) pos.x=newX;
    if(newY>=0 && newY<=maze.clientHeight-20) pos.y=newY;
    ball.style.left = pos.x+'px';
    ball.style.top = pos.y+'px';
    checkGoal();
}

function checkGoal(){
    const goal = maze.querySelector(".goal");
    const gX = goal.offsetLeft;
    const gY = goal.offsetTop;
    const gW = goal.offsetWidth;
    const gH = goal.offsetHeight;
    if(pos.x +20>gX && pos.x<gX+gW && pos.y+20>gY && pos.y<gY+gH){
        nextBtn.style.display='block';
    }
}

document.addEventListener("keydown",(e)=>{
    if(e.key==="ArrowUp") moveBall(0,-step);
    if(e.key==="ArrowDown") moveBall(0,step);
    if(e.key==="ArrowLeft") moveBall(-step,0);
    if(e.key==="ArrowRight") moveBall(step,0);
});

// Touch control
let startX, startY;
maze.addEventListener("touchstart", e => {
    startX=e.touches[0].clientX;
    startY=e.touches[0].clientY;
});
maze.addEventListener("touchmove", e => {
    let dx = e.touches[0].clientX - startX;
    let dy = e.touches[0].clientY - startY;
    if(Math.abs(dx)>Math.abs(dy)){
        moveBall(dx>0?step:-step,0);
    }else{
        moveBall(0,dy>0?step:-step);
    }
    startX=e.touches[0].clientX;
    startY=e.touches[0].clientY;
});
</script>
</body>
</html>
